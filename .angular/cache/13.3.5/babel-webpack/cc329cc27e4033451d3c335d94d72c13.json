{"ast":null,"code":"import { LocalJsonService } from '../local-json.service';\nimport { SearchService } from '../search.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { environment } from '../../environments/environment';\nimport { TitleLinkComponent } from '../title-link/title-link.component';\nimport { Location } from '@angular/common';\nimport { UrlService } from '../url.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../local-json.service\";\nimport * as i3 from \"../search.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../url.service\";\nimport * as i6 from \"../breadcrumb/breadcrumb.component\";\nimport * as i7 from \"ng2-smart-table\";\n\nfunction TopicsComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 7);\n    i0.ɵɵlistener(\"change\", function TopicsComponent_div_9_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.changeCurrentCASC($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const csc_r5 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r0.current_csc.indexOf(csc_r5) != -1)(\"value\", csc_r5)(\"id\", csc_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", csc_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(csc_r5.replace(\" CASC\", \"\"));\n  }\n}\n\nfunction TopicsComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 9);\n    i0.ɵɵlistener(\"change\", function TopicsComponent_div_13_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.changeCurrentSubTopic($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const subtopic_r8 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r1.current_subtopic.indexOf(subtopic_r8) != -1)(\"value\", subtopic_r8)(\"id\", subtopic_r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", subtopic_r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(subtopic_r8);\n  }\n}\n\nfunction TopicsComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 10);\n    i0.ɵɵlistener(\"change\", function TopicsComponent_div_17_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.changeCurrentStatus($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const status_r11 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r2.current_status.indexOf(status_r11) != -1)(\"value\", status_r11)(\"id\", status_r11);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", status_r11);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(status_r11);\n  }\n}\n\nfunction TopicsComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 11);\n    i0.ɵɵlistener(\"change\", function TopicsComponent_div_21_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.changeCurrentYear($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const fy_r14 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r3.current_fy.indexOf(fy_r14) != -1)(\"value\", fy_r14)(\"id\", fy_r14);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", fy_r14);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(fy_r14);\n  }\n}\n\nfunction TopicsComponent_div_22_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\", 18);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Loading \", ctx_r17.title, \" ScienceBase Projects. \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"\", ctx_r17.approot, \"assets/loading.gif\", i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction TopicsComponent_div_22_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"h4\", 20);\n    i0.ɵɵtext(2, \" Use one or more filters above to select the topics, fiscal years, or statises for the projects you wish to view. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function TopicsComponent_div_22_div_4_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return ctx_r20.showAllProjects();\n    });\n    i0.ɵɵtext(4, \" See All Projects \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nconst _c0 = function (a1, a2) {\n  return [\"/project/\", a1, a2];\n};\n\nfunction TopicsComponent_div_22_div_5_div_1_ul_5_li_1_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"a\", 27);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const project_r23 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction2(2, _c0, project_r23.csc[\"id\"], project_r23.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", project_r23[\"title\"], \" \");\n  }\n}\n\nconst _c1 = function (a1) {\n  return [\"/component/\", a1];\n};\n\nfunction TopicsComponent_div_22_div_5_div_1_ul_5_li_1_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"a\", 27);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const project_r23 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c1, project_r23.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", project_r23[\"title\"], \" \");\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_ul_5_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtemplate(1, TopicsComponent_div_22_div_5_div_1_ul_5_li_1_span_1_Template, 3, 5, \"span\", 15);\n    i0.ɵɵtemplate(2, TopicsComponent_div_22_div_5_div_1_ul_5_li_1_span_2_Template, 3, 4, \"span\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const project_r23 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", project_r23.types == \"Project\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", project_r23.types != \"Project\");\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_ul_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, TopicsComponent_div_22_div_5_div_1_ul_5_li_1_Template, 3, 2, \"li\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const project_r23 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", project_r23.children);\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const project_r23 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", project_r23.fiscal_year, \" \");\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" N/A \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_ul_19_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const st_r40 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", st_r40, \" \");\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_ul_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, TopicsComponent_div_22_div_5_div_1_ul_19_li_1_Template, 2, 1, \"li\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const st_r40 = ctx.$implicit;\n    const ctx_r27 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r27.isOnTopic(st_r40));\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" N/A \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const project_r23 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(project_r23.status);\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"span\");\n    i0.ɵɵtext(2, \"N/A\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"div\", 25)(2, \"h4\", 26)(3, \"a\", 27);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, TopicsComponent_div_22_div_5_div_1_ul_5_Template, 2, 1, \"ul\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 28)(7, \"b\");\n    i0.ɵɵtext(8, \"Funding Year: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, TopicsComponent_div_22_div_5_div_1_span_9_Template, 2, 1, \"span\", 15);\n    i0.ɵɵtemplate(10, TopicsComponent_div_22_div_5_div_1_span_10_Template, 2, 0, \"span\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 28)(12, \"b\");\n    i0.ɵɵtext(13, \"CASC: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 28)(17, \"b\");\n    i0.ɵɵtext(18, \"Subtopic(s):\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, TopicsComponent_div_22_div_5_div_1_ul_19_Template, 2, 1, \"ul\", 5);\n    i0.ɵɵtemplate(20, TopicsComponent_div_22_div_5_div_1_span_20_Template, 2, 0, \"span\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 28)(22, \"b\");\n    i0.ɵɵtext(23, \"Status: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, TopicsComponent_div_22_div_5_div_1_span_24_Template, 3, 1, \"span\", 15);\n    i0.ɵɵtemplate(25, TopicsComponent_div_22_div_5_div_1_span_25_Template, 3, 0, \"span\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const project_r23 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction2(10, _c0, project_r23.csc[\"id\"], project_r23.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", project_r23[\"title\"], \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (project_r23.children == null ? null : project_r23.children.length) > 0);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", project_r23[\"fiscal_year\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !project_r23.fiscal_year);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", project_r23.csc.name, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", project_r23.subtopics);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !project_r23.subtopics);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", project_r23.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !project_r23.status);\n  }\n}\n\nfunction TopicsComponent_div_22_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, TopicsComponent_div_22_div_5_div_1_Template, 26, 13, \"div\", 23);\n    i0.ɵɵelement(2, \"br\")(3, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r19.filteredProjectsList);\n  }\n}\n\nfunction TopicsComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13);\n    i0.ɵɵelement(2, \"ng2-smart-table\", 14);\n    i0.ɵɵtemplate(3, TopicsComponent_div_22_div_3_Template, 4, 2, \"div\", 15);\n    i0.ɵɵtemplate(4, TopicsComponent_div_22_div_4_Template, 5, 0, \"div\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, TopicsComponent_div_22_div_5_Template, 4, 1, \"div\", 17);\n    i0.ɵɵelement(6, \"br\")(7, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"settings\", ctx_r4.settings)(\"source\", ctx_r4.filteredProjectsList);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.dataLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.filteredProjectsList.length == 0 && ctx_r4.dataLoading == false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.dataLoading && ctx_r4.filteredProjectsList.length > 0);\n  }\n}\n\nexport let TopicsComponent = /*#__PURE__*/(() => {\n  class TopicsComponent {\n    constructor(route, localJson, searchService, router, location, aroute, urlService) {\n      this.route = route;\n      this.localJson = localJson;\n      this.searchService = searchService;\n      this.router = router;\n      this.location = location;\n      this.aroute = aroute;\n      this.urlService = urlService;\n      this.sub = null;\n      this.topic = null;\n      this.page_title = null;\n      this.topics = {\n        \"drought-fire-extremes\": \"588244b0e4b0b3d9add24391\",\n        \"science-tools\": \"5b6212e7e4b03f4cf7599b82\",\n        landscapes: \"5882456be4b0b3d9add24395\",\n        \"indigenous-peoples\": \"588246dae4b0b3d9add243a1\",\n        \"water-coasts-ice\": \"5882464ce4b0b3d9add2439a\",\n        \"wildlife-plants\": \"58824220e4b0b3d9add2438b\"\n      };\n      this.topic_names = {\n        \"drought-fire-extremes\": \"Drought, Fire and Extreme Weather\",\n        \"science-tools\": \"Science Tools for Managers\",\n        landscapes: \"Landscapes\",\n        \"indigenous-peoples\": \"Indigenous Peoples\",\n        \"water-coasts-ice\": \"Water, Coasts and Ice\",\n        \"wildlife-plants\": \"Wildlife and Plants\"\n      };\n      this.settings = {\n        columns: {\n          fiscal_year: {\n            title: \"Year\",\n            width: \"6%\"\n          },\n          title: {\n            title: \"Title\",\n            type: \"custom\",\n            renderComponent: TitleLinkComponent\n          },\n          csc_name: {\n            title: \"CASC\",\n            width: \"15%\"\n          },\n          subtopics_formatted: {\n            title: \"Subtopic(s)\",\n            type: \"html\",\n            width: \"20%\"\n          },\n          status: {\n            title: \"Status\",\n            width: \"15%\"\n          }\n        },\n        actions: false,\n        hideSubHeader: true,\n        pager: {\n          display: false\n        } // this.source.setSort([{ field: 'id', direction: 'asc' }]);\n\n      };\n      this.topics_url = environment.baseURL;\n      this.project_url = environment.baseURL + \"/project\";\n      this.subtopics = [];\n      this.fiscal_years = [];\n      this.statuses = [];\n      this.cscs = [];\n      this.types = [\"Project\"];\n      this.current_subtopic = [\"All Subtopics\"];\n      this.current_type = \"Project\";\n      this.current_fy = [\"All Fiscal Years\"];\n      this.current_status = [\"All Statuses\"];\n      this.current_csc = [\"All CASCs\"];\n      this.projectsList = [];\n      this.filteredProjectsList = [];\n      this.dataLoading = true;\n      this.subtopicsFilter = null;\n    }\n\n    changeCurrentCASC(event = null) {\n      if (event.target.checked == true) {\n        let index = this.current_csc.indexOf(\"All CASCs\");\n\n        if (index != -1) {\n          this.current_csc.splice(index, 1);\n        }\n\n        this.current_csc.push(event.target.value);\n      } else {\n        let index = this.current_csc.indexOf(event.target.value);\n\n        if (index != -1) {\n          this.current_csc.splice(index, 1);\n        }\n      }\n\n      if (this.current_csc.length == 0) {\n        this.current_csc.push(\"All CASCs\");\n      }\n\n      this.filterProjectsList(event.target.value);\n    }\n\n    changeCurrentSubTopic(event = null) {\n      if (event.target.checked == true) {\n        let index = this.current_subtopic.indexOf(\"All Subtopics\");\n\n        if (index != -1) {\n          this.current_subtopic.splice(index, 1);\n        }\n\n        this.current_subtopic.push(event.target.value);\n      } else {\n        let index = this.current_subtopic.indexOf(event.target.value);\n\n        if (index != -1) {\n          this.current_subtopic.splice(index, 1);\n        }\n      }\n\n      if (this.current_subtopic.length == 0) {\n        this.current_subtopic.push(\"All Subtopics\");\n      }\n\n      this.filterProjectsList(event.target.value);\n    }\n\n    changeCurrentStatus(event = null) {\n      if (event.target.checked == true) {\n        let index = this.current_status.indexOf(\"All Statuses\");\n\n        if (index != -1) {\n          this.current_status.splice(index, 1);\n        }\n\n        this.current_status.push(event.target.value);\n      } else {\n        let index = this.current_status.indexOf(event.target.value);\n\n        if (index != -1) {\n          this.current_status.splice(index, 1);\n        }\n      }\n\n      if (this.current_status.length == 0) {\n        this.current_status.push(\"All Statuses\");\n      }\n\n      this.filterProjectsList(event.target.value);\n    }\n\n    changeCurrentYear(event = null) {\n      if (event.target.checked == true) {\n        let index = this.current_fy.indexOf(\"All Fiscal Years\");\n\n        if (index != -1) {\n          this.current_fy.splice(index, 1);\n        }\n\n        this.current_fy.push(event.target.value);\n      } else {\n        let index = this.current_fy.indexOf(event.target.value);\n\n        if (index != -1) {\n          this.current_fy.splice(index, 1);\n        }\n      }\n\n      if (this.current_fy.length == 0) {\n        this.current_fy.push(\"All Fiscal Years\");\n      }\n\n      this.filterProjectsList(event.target.value);\n    }\n\n    filterProjectsList(event = null) {\n      this.filteredProjectsList = [];\n\n      for (var project in this.projectsList) {\n        if (this.current_subtopic.indexOf(\"All Subtopics\") === -1 && this.projectsList[project].subtopics != null) {\n          var matched_subtopic = false;\n\n          for (let subtopic in this.projectsList[project].subtopics) {\n            for (let curr_subtopic in this.current_subtopic) {\n              if (this.projectsList[project].subtopics[subtopic] == this.current_subtopic[curr_subtopic]) {\n                matched_subtopic = true;\n                break;\n              }\n            }\n          }\n\n          if (!matched_subtopic) {\n            continue;\n          }\n        }\n\n        var matchedType = false;\n\n        if (this.current_type != \"All Types\") {\n          for (var thisType in this.projectsList[project].types) {\n            var matchedType = true;\n\n            if (this.projectsList[project].types[thisType] !== this.current_type) {\n              matchedType = false;\n            } else {\n              break;\n            }\n          }\n\n          if (!matchedType) {\n            continue;\n          }\n        }\n\n        if (this.current_fy.indexOf(\"All Fiscal Years\") === -1) {\n          let found = false;\n\n          for (let year in this.current_fy) {\n            if (this.projectsList[project].fiscal_year === this.current_fy[year]) {\n              found = true;\n              break;\n            }\n          }\n\n          if (!found) {\n            continue;\n          }\n        }\n\n        if (this.current_status.indexOf(\"All Statuses\") === -1) {\n          let found = false;\n\n          for (let status in this.current_status) {\n            if (this.projectsList[project].status === this.current_status[status]) {\n              found = true;\n              console.log(\"This is TRUE\");\n              break;\n            }\n          }\n\n          if (!found) {\n            continue;\n          }\n        }\n\n        if (this.current_csc.indexOf(\"All CASCs\") === -1) {\n          let found = false;\n\n          for (let csc in this.current_csc) {\n            if (this.projectsList[project].csc[\"name\"] === this.current_csc[csc]) {\n              found = true;\n              break;\n            }\n          }\n\n          if (!found) {\n            continue;\n          }\n        }\n\n        this.filteredProjectsList.push(this.projectsList[project]);\n      }\n\n      this.updateUrl();\n      this.sortList();\n    }\n\n    showAllProjects() {\n      this.filteredProjectsList = this.projectsList;\n      this.current_subtopic = [];\n      this.current_fy = [];\n      this.current_status = [];\n      this.current_type = \"Project\";\n      this.current_csc = [];\n    }\n\n    isOnTopic(subtopic) {\n      for (var topicSubtopic in this.subtopicsFilter) {\n        if (subtopic == this.subtopicsFilter[topicSubtopic][\"label\"]) {\n          return true;\n        }\n      }\n\n      return false;\n    } //TODO: put this code in a utility function/service\n\n\n    updateUrl() {\n      let params = {};\n\n      if (this.current_subtopic.indexOf(\"All Subtopics\") === -1) {\n        params[\"subtopic\"] = this.current_subtopic.join('+');\n      }\n\n      if (this.current_fy.indexOf(\"All Fiscal Years\") === -1) {\n        params[\"year\"] = this.current_fy.join('+');\n      }\n\n      if (this.current_status.indexOf(\"All Statuses\") === -1) {\n        params[\"status\"] = this.current_status.join('+');\n      }\n\n      if (this.current_type != \"All Types\") {\n        params[\"type\"] = this.current_type;\n      }\n\n      if (this.current_csc.indexOf(\"All CASCs\") == -1) {\n        params[\"csc\"] = this.current_csc.join('+');\n      }\n\n      const url = this.router.createUrlTree([params], {\n        relativeTo: this.aroute\n      }).toString();\n      this.location.replaceState(url);\n    }\n\n    sortList() {\n      // First sorts projects by year, then by title\n      this.filteredProjectsList.sort((a, b) => {\n        function sortByTitle(a, b) {\n          if (a.title == b.title) {\n            return 0;\n          }\n\n          return a.title < b.title ? -1 : 1;\n        }\n\n        if (a.fiscal_year == b.fiscal_year) {\n          return sortByTitle(a, b);\n        }\n\n        return a.fiscal_year > b.fiscal_year ? -1 : 1;\n      });\n    }\n\n    ngOnInit() {\n      this.sub = this.route.params.subscribe(params => {\n        this.topic = params[\"topic\"];\n\n        if (params[\"subtopic\"]) {\n          this.current_subtopic = params[\"subtopic\"].split('+');\n        }\n\n        if (params[\"year\"]) {\n          this.current_fy = params[\"year\"].split('+');\n        }\n\n        if (params[\"status\"]) {\n          this.current_status = params[\"status\"].split('+');\n        }\n\n        if (params[\"type\"]) {\n          this.current_type = params[\"type\"];\n        }\n\n        if (params[\"csc\"]) {\n          this.current_csc = params[\"csc\"].split('+');\n        }\n\n        this.page_title = this.topic_names[this.topic];\n        this.urlService.setPreviousTitle(this.page_title);\n        this.urlService.setCurrentTitle(this.page_title);\n      });\n      this.searchService.getTopics().subscribe(topics => {\n        var topics = topics;\n\n        for (var topic in topics) {\n          if (topics[topic].label == this.page_title) {\n            this.subtopicsFilter = topics[topic].subtopics;\n          }\n        }\n      });\n      this.localJson.loadTopic(encodeURIComponent(this.topic_names[this.topic])).subscribe(data => {\n        this.projectsList = data;\n\n        for (var project in this.projectsList) {\n          for (var subtopic in this.projectsList[project].topics) {\n            if (this.subtopicsFilter != null) {\n              for (var topicSubtopic in this.subtopicsFilter) {\n                if (this.projectsList[project].subtopics[subtopic] == this.subtopicsFilter[topicSubtopic][\"label\"] && this.subtopics.indexOf(this.projectsList[project].subtopics[subtopic]) < 0) {\n                  this.subtopics.push(this.projectsList[project].subtopics[subtopic]);\n                }\n              }\n            }\n          }\n\n          if (this.fiscal_years.indexOf(this.projectsList[project].fiscal_year) < 0) {\n            if (this.projectsList[project].fiscal_year != null) {\n              this.fiscal_years.push(this.projectsList[project].fiscal_year);\n            }\n          }\n\n          if (this.statuses.indexOf(this.projectsList[project].status) < 0) {\n            if (this.projectsList[project].status != null) {\n              this.statuses.push(this.projectsList[project].status);\n            }\n          }\n\n          if (this.cscs.indexOf(this.projectsList[project].csc[\"name\"]) < 0) {\n            this.cscs.push(this.projectsList[project].csc[\"name\"]);\n          }\n\n          if (this.projectsList[project].types) {\n            for (var this_type of this.projectsList[project].types) {\n              if (this.types.indexOf(this_type) < 0) {\n                if (this_type != null) {\n                  this.types.push(this_type);\n                }\n              }\n            }\n          }\n\n          this.fiscal_years.sort().reverse();\n          this.subtopics.sort();\n          this.statuses.sort();\n          this.cscs.sort();\n          this.filteredProjectsList.push(this.projectsList[project]);\n          this.dataLoading = false; // Prepares data for sortable table\n          // cscs and year\n\n          for (var project in this.filteredProjectsList) {\n            this.projectsList[project].csc_name = this.projectsList[project].csc[\"name\"]; // subtopics\n\n            this.projectsList[project].subtopics_formatted = \"<ul>\";\n\n            for (var st of this.projectsList[project].subtopics) {\n              if (this.isOnTopic(st) && this.projectsList[project].subtopics_formatted.indexOf(st) < 0) {\n                this.projectsList[project].subtopics_formatted += \"<li>\" + st + \"</li>\";\n              }\n            }\n\n            this.projectsList[project].subtopics_formatted += \"</ul>\"; // status\n\n            if (!this.projectsList[project].status) {\n              this.projectsList[project].status = \"N/A\";\n            }\n          } //end for project\n\n        }\n\n        this.current_type = \"Project\";\n        this.filterProjectsList();\n        this.sortList();\n      });\n    }\n\n  }\n\n  TopicsComponent.ɵfac = function TopicsComponent_Factory(t) {\n    return new (t || TopicsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.LocalJsonService), i0.ɵɵdirectiveInject(i3.SearchService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.Location), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i5.UrlService));\n  };\n\n  TopicsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TopicsComponent,\n    selectors: [[\"app-topics\"]],\n    decls: 23,\n    vars: 6,\n    consts: [[1, \"container-fluid\"], [1, \"row\", \"topic\"], [1, \"col-md-2\"], [1, \"select-box\"], [1, \"select-title\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"col-md-10 results-table\", 4, \"ngIf\"], [\"type\", \"checkbox\", \"name\", \"csc\", 3, \"checked\", \"value\", \"id\", \"change\"], [3, \"for\"], [\"type\", \"checkbox\", \"name\", \"subtopic\", 3, \"checked\", \"value\", \"id\", \"change\"], [\"type\", \"checkbox\", \"name\", \"status\", 3, \"checked\", \"value\", \"id\", \"change\"], [\"type\", \"checkbox\", \"name\", \"fy\", 3, \"checked\", \"value\", \"id\", \"change\"], [1, \"col-md-10\", \"results-table\"], [1, \"d-none\", \"d-lg-block\"], [1, \"table\", \"table-striped\", 3, \"settings\", \"source\"], [4, \"ngIf\"], [\"class\", \"no_data\", 4, \"ngIf\"], [\"class\", \"d-lg-none col-xs-10\", 4, \"ngIf\"], [1, \"loading\"], [\"alt\", \"Loading Results\", \"title\", \"Loading Results\", 1, \"loading\", 3, \"src\"], [1, \"no_data\"], [1, \"btn\", \"btn-outline-secondary\", \"btn-small\", 3, \"click\"], [1, \"d-lg-none\", \"col-xs-10\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\"], [1, \"card-block\", \"mobile\"], [1, \"card-title\"], [3, \"routerLink\"], [1, \"card-text\"]],\n    template: function TopicsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"app-breadcrumb\");\n        i0.ɵɵelementStart(2, \"h2\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 1)(5, \"div\", 2)(6, \"div\", 3)(7, \"h3\", 4);\n        i0.ɵɵtext(8, \"CASC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, TopicsComponent_div_9_Template, 4, 5, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 3)(11, \"h3\", 4);\n        i0.ɵɵtext(12, \"Subtopic\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, TopicsComponent_div_13_Template, 4, 5, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 3)(15, \"h3\", 4);\n        i0.ɵɵtext(16, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, TopicsComponent_div_17_Template, 4, 5, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 3)(19, \"h3\", 4);\n        i0.ɵɵtext(20, \"Year\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(21, TopicsComponent_div_21_Template, 4, 5, \"div\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(22, TopicsComponent_div_22_Template, 8, 5, \"div\", 6);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Topic: \", ctx.page_title, \"\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.cscs);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.subtopics);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.statuses);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.fiscal_years);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.dataLoading && ctx.filteredProjectsList.length > 0);\n      }\n    },\n    directives: [i6.BreadcrumbComponent, i4.NgForOf, i4.NgIf, i7.Ng2SmartTableComponent, i1.RouterLinkWithHref],\n    styles: [\"label[_ngcontent-%COMP%]{padding-left:.25rem}\", \"h2[_ngcontent-%COMP%]{margin:1.5rem .75rem 3rem}.select-box[_ngcontent-%COMP%]{margin-bottom:2rem}.select-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.35rem;padding-bottom:2px;border-bottom:1px solid #eee}.select-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0 0 .2rem;padding-left:1.1rem;text-indent:-1.1rem;line-height:1.4;font-size:1rem}.select-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:inline;position:relative;bottom:1px;margin-right:.5ex}.select-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline;margin-bottom:0}[_nghost-%COMP%]  table thead{border-bottom:1px solid #eee}[_nghost-%COMP%]  table thead a.sort.asc:after{border-width:6px!important;border-bottom-color:#888}[_nghost-%COMP%]  table thead a.sort.desc:after{border-width:6px!important;border-bottom-color:#888}[_nghost-%COMP%]  table tr th.ng2-smart-th{text-align:left;vertical-align:bottom!important;padding-top:0;margin-top:0}[_nghost-%COMP%]  table tr th.ng2-smart-th.title{text-align:center}[_nghost-%COMP%]  table tr th, [_nghost-%COMP%]  table tr td{line-height:1.25;font-size:1rem!important;border-top:none}[_nghost-%COMP%]  table tr th ul, [_nghost-%COMP%]  table tr td ul{margin-left:0;padding-left:0}.card[_ngcontent-%COMP%]{margin-bottom:1rem;padding:1rem}.card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:1rem}.card[_ngcontent-%COMP%]   h4.card-title[_ngcontent-%COMP%]{font-size:1.25rem}\"]\n  });\n  return TopicsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}