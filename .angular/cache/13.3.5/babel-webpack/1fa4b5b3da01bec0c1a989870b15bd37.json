{"ast":null,"code":"import { LocalJsonService } from \"../local-json.service\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { environment } from \"../../environments/environment\";\nimport { TitleLinkComponent } from \"../title-link/title-link.component\";\nimport { Location } from \"@angular/common\";\nimport { UrlService } from \"../url.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../local-json.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../url.service\";\nimport * as i5 from \"../breadcrumb/breadcrumb.component\";\nimport * as i6 from \"ng2-smart-table\";\n\nfunction CscComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 9);\n    i0.ɵɵlistener(\"change\", function CscComponent_div_9_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.changeCurrentTopic($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const topic_r5 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r0.current_topic.indexOf(topic_r5) != -1)(\"value\", topic_r5)(\"id\", topic_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", topic_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(topic_r5);\n  }\n}\n\nfunction CscComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 11);\n    i0.ɵɵlistener(\"change\", function CscComponent_div_13_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.changeCurrentFY($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const fy_r8 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r1.current_fy.indexOf(fy_r8) != -1)(\"value\", fy_r8)(\"id\", fy_r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", fy_r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(fy_r8);\n  }\n}\n\nfunction CscComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 12);\n    i0.ɵɵlistener(\"change\", function CscComponent_div_17_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.changeCurrentStatus($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const status_r11 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r2.current_status.indexOf(status_r11) != -1)(\"value\", status_r11)(\"id\", status_r11);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", status_r11);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(status_r11);\n  }\n}\n\nfunction CscComponent_div_19_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\", 18);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Loading \", ctx_r14.title, \" ScienceBase Projects.\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"\", ctx_r14.approot, \"assets/loading.gif\", i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction CscComponent_div_19_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"h4\", 20);\n    i0.ɵɵtext(2, \" Use one or more filters above to select the topics, fiscal years, or statises for the projects you wish to view. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function CscComponent_div_19_div_4_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.showAllProjects();\n    });\n    i0.ɵɵtext(4, \" See All Projects \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction CscComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14);\n    i0.ɵɵelement(2, \"ng2-smart-table\", 15);\n    i0.ɵɵtemplate(3, CscComponent_div_19_div_3_Template, 4, 2, \"div\", 16);\n    i0.ɵɵtemplate(4, CscComponent_div_19_div_4_Template, 5, 0, \"div\", 17);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"settings\", ctx_r3.settings)(\"source\", ctx_r3.filteredCscProjectsList);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.dataLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.filteredCscProjectsList.length == 0 && ctx_r3.dataLoading == false);\n  }\n}\n\nfunction CscComponent_div_20_div_1_ul_5_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const childProject_r29 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", childProject_r29.title, \" \");\n  }\n}\n\nfunction CscComponent_div_20_div_1_ul_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, CscComponent_div_20_div_1_ul_5_li_1_Template, 2, 1, \"li\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const project_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", project_r19.children);\n  }\n}\n\nfunction CscComponent_div_20_div_1_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const project_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", project_r19.fiscal_year, \" \");\n  }\n}\n\nfunction CscComponent_div_20_div_1_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" N/A \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CscComponent_div_20_div_1_ul_14_em_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"em\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const pi_r32 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"(\", pi_r32.organization, \")\");\n  }\n}\n\nfunction CscComponent_div_20_div_1_ul_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\")(1, \"li\");\n    i0.ɵɵtext(2);\n    i0.ɵɵtemplate(3, CscComponent_div_20_div_1_ul_14_em_3_Template, 2, 1, \"em\", 16);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const pi_r32 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", pi_r32.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", pi_r32.organization);\n  }\n}\n\nfunction CscComponent_div_20_div_1_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const project_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", project_r19.topics, \" \");\n  }\n}\n\nfunction CscComponent_div_20_div_1_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Unknown \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CscComponent_div_20_div_1_span_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const project_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", project_r19.status, \" \");\n  }\n}\n\nfunction CscComponent_div_20_div_1_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Unknown \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a1, a2) {\n  return [\"/project/\", a1, a2];\n};\n\nfunction CscComponent_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"div\", 25)(2, \"h4\", 26)(3, \"a\", 27);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, CscComponent_div_20_div_1_ul_5_Template, 2, 1, \"ul\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 28)(7, \"b\");\n    i0.ɵɵtext(8, \"Funding Year: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, CscComponent_div_20_div_1_span_9_Template, 2, 1, \"span\", 16);\n    i0.ɵɵtemplate(10, CscComponent_div_20_div_1_span_10_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 28)(12, \"b\");\n    i0.ɵɵtext(13, \"Principal Investigator(s): \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, CscComponent_div_20_div_1_ul_14_Template, 4, 2, \"ul\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 28)(16, \"b\");\n    i0.ɵɵtext(17, \"Topic(s): \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, CscComponent_div_20_div_1_span_18_Template, 2, 1, \"span\", 16);\n    i0.ɵɵtemplate(19, CscComponent_div_20_div_1_span_19_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 28)(21, \"b\");\n    i0.ɵɵtext(22, \"Status: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(23, CscComponent_div_20_div_1_span_23_Template, 2, 1, \"span\", 16);\n    i0.ɵɵtemplate(24, CscComponent_div_20_div_1_span_24_Template, 2, 0, \"span\", 16);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const project_r19 = ctx.$implicit;\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction2(10, _c0, ctx_r18.sbId, project_r19.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", project_r19[\"title\"], \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (project_r19.children == null ? null : project_r19.children.length) > 0);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", project_r19[\"fiscal_year\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !project_r19.fiscal_year);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", project_r19.contacts.principal_investigators);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", project_r19 == null ? null : project_r19.topics);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !project_r19.topics);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", project_r19.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !project_r19.status);\n  }\n}\n\nfunction CscComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, CscComponent_div_20_div_1_Template, 25, 13, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.filteredCscProjectsList);\n  }\n}\n\nexport let CscComponent = /*#__PURE__*/(() => {\n  class CscComponent {\n    constructor(route, localJson, router, location, aroute, urlService) {\n      this.route = route;\n      this.localJson = localJson;\n      this.router = router;\n      this.location = location;\n      this.aroute = aroute;\n      this.urlService = urlService;\n      this.cscProjectsList = [];\n      this.filteredCscProjectsList = [];\n      this.csc_url = environment.baseURL;\n      this.topics = [];\n      this.fiscal_years = [];\n      this.statuses = [];\n      this.current_topic = [\"All Topics\"];\n      this.current_fy = [\"All Fiscal Years\"];\n      this.current_status = [\"All Statuses\"];\n      this.title = null;\n      this.dataLoading = true;\n      this.csc_ids = {\n        \"5050cb0ee4b0be20bb30eac0\": \"National CASC\",\n        \"4f831626e4b0e84f6086809b\": \"Alaska CASC\",\n        \"4f83509de4b0e84f60868124\": \"North Central CASC\",\n        \"4f8c648de4b0546c0c397b43\": \"Northeast CASC\",\n        \"4f8c64d2e4b0546c0c397b46\": \"Northwest CASC\",\n        \"4f8c650ae4b0546c0c397b48\": \"Pacific Islands CASC\",\n        \"4f8c652fe4b0546c0c397b4a\": \"South Central CASC\",\n        \"4f8c6557e4b0546c0c397b4c\": \"Southeast CASC\",\n        \"4f8c6580e4b0546c0c397b4e\": \"Southwest CASC\",\n        \"5e2f3f59e4b0a79317d422af\": \"Midwest CASC\"\n      };\n      this.csc_english_ids = {\n        \"national-casc\": \"5050cb0ee4b0be20bb30eac0\",\n        alaska: \"4f831626e4b0e84f6086809b\",\n        \"north-central\": \"4f83509de4b0e84f60868124\",\n        northeast: \"4f8c648de4b0546c0c397b43\",\n        northwest: \"4f8c64d2e4b0546c0c397b46\",\n        \"pacific-islands\": \"4f8c650ae4b0546c0c397b48\",\n        \"south-central\": \"4f8c652fe4b0546c0c397b4a\",\n        southeast: \"4f8c6557e4b0546c0c397b4c\",\n        southwest: \"4f8c6580e4b0546c0c397b4e\",\n        midwest: \"5e2f3f59e4b0a79317d422af\"\n      };\n      this.settings = {\n        columns: {\n          fiscal_year: {\n            title: \"Year\",\n            width: \"6%\"\n          },\n          title: {\n            title: \"Title\",\n            type: \"custom\",\n            renderComponent: TitleLinkComponent\n          },\n          investigators_formatted: {\n            title: \"Principal Investigator(s)\",\n            type: \"html\",\n            width: \"25%\"\n          },\n          topics_formatted: {\n            title: \"Topic(s)\",\n            width: \"10%\",\n            type: \"html\"\n          },\n          status: {\n            title: \"Status\",\n            width: \"7%\"\n          }\n        },\n        actions: false,\n        hideSubHeader: true,\n        pager: {\n          display: false\n        }\n      };\n    }\n\n    showAllProjects() {\n      this.filteredCscProjectsList = [];\n\n      for (var project in this.cscProjectsList) {\n        this.filteredCscProjectsList.push(this.cscProjectsList[project]);\n      }\n    }\n\n    sortProjectsByKey(array, key) {\n      return array.sort(function (a, b) {\n        var x = a[key];\n        var y = b[key];\n        return x > y ? -1 : x < y ? 1 : 0;\n      });\n    }\n\n    changeCurrentTopic(event = null) {\n      if (event.target.checked == true) {\n        let index = this.current_topic.indexOf(\"All Topics\");\n\n        if (index != -1) {\n          this.current_topic.splice(index, 1);\n        }\n\n        this.current_topic.push(event.target.value);\n      } else {\n        let index = this.current_topic.indexOf(event.target.value);\n\n        if (index != -1) {\n          this.current_topic.splice(index, 1);\n        }\n      }\n\n      if (this.current_topic.length == 0) {\n        this.current_topic.push(\"All Topics\");\n      }\n\n      this.filterProjectsList(event.target.value);\n    }\n\n    changeCurrentFY(event = null) {\n      if (event.target.checked == true) {\n        let index = this.current_fy.indexOf(\"All Fiscal Years\");\n\n        if (index != -1) {\n          this.current_fy.splice(index, 1);\n        }\n\n        this.current_fy.push(event.target.value);\n      } else {\n        let index = this.current_fy.indexOf(event.target.value);\n\n        if (index != -1) {\n          this.current_fy.splice(index, 1);\n        }\n      }\n\n      if (this.current_fy.length == 0) {\n        this.current_fy.push(\"All Fiscal Years\");\n      }\n\n      this.filterProjectsList(event.target.value);\n    }\n\n    changeCurrentStatus(event = null) {\n      if (event.target.checked == true) {\n        let index = this.current_status.indexOf(\"All Statuses\");\n\n        if (index != -1) {\n          this.current_status.splice(index, 1);\n        }\n\n        this.current_status.push(event.target.value);\n      } else {\n        let index = this.current_status.indexOf(event.target.value);\n\n        if (index != -1) {\n          this.current_status.splice(index, 1);\n        }\n      }\n\n      if (this.current_status.length == 0) {\n        this.current_status.push(\"All Statuses\");\n      }\n\n      this.filterProjectsList(event.target.value);\n    }\n\n    filterProjectsList(event = null) {\n      this.filteredCscProjectsList = []; // tslint:disable-next-line:forin\n\n      for (var project in this.cscProjectsList) {\n        var display = true;\n\n        if (this.current_topic.indexOf(\"All Topics\") === -1 && this.cscProjectsList[project].topics != null) {\n          let matched_topic = false;\n\n          for (let topic in this.cscProjectsList[project].topics) {\n            for (let curr_topic in this.current_topic) {\n              if (this.cscProjectsList[project].topics[topic].replace(/,/g, \"\").trim() == this.current_topic[curr_topic].replace(/,/g, \"\").trim()) {\n                matched_topic = true; // Found our topic, let's check year and status.\n\n                break;\n              }\n            }\n\n            if (matched_topic == true) {\n              break;\n            }\n          }\n\n          if (matched_topic == false) {\n            continue;\n          }\n        }\n\n        if (this.current_fy.indexOf(\"All Fiscal Years\") === -1) {\n          let found = false;\n\n          for (let year in this.current_fy) {\n            if (this.cscProjectsList[project].fiscal_year === this.current_fy[year]) {\n              found = true;\n              break;\n            }\n          }\n\n          if (!found) {\n            continue;\n          }\n        }\n\n        if (this.current_status.indexOf(\"All Statuses\") === -1) {\n          let found = false;\n\n          for (let status in this.current_status) {\n            if (this.cscProjectsList[project].status === this.current_status[status]) {\n              found = true;\n              break;\n            }\n          }\n\n          if (!found) {\n            continue;\n          }\n        }\n\n        this.filteredCscProjectsList.push(this.cscProjectsList[project]);\n      }\n\n      this.updateUrl();\n      this.sortList();\n    } //TODO: put this code in a utility function/service\n\n\n    updateUrl() {\n      let params = {};\n\n      if (this.current_topic.indexOf(\"All Topics\") === -1) {\n        params[\"topic\"] = this.current_topic.join('+');\n      }\n\n      if (this.current_fy.indexOf(\"All Fiscal Years\") === -1) {\n        params[\"year\"] = this.current_fy.join('+');\n      }\n\n      if (this.current_status.indexOf(\"All Statuses\") === -1) {\n        params[\"status\"] = this.current_status.join(\"+\");\n      }\n\n      const url = this.router.createUrlTree([params], {\n        relativeTo: this.aroute\n      }).toString();\n      this.location.replaceState(url);\n    }\n\n    sortList() {\n      this.filteredCscProjectsList.sort((a, b) => {\n        function sortByTitle(a, b) {\n          if (a.title == b.title) {\n            return 0;\n          }\n\n          return a.title < b.title ? -1 : 1;\n        }\n\n        if (a.fiscal_year == b.fiscal_year) {\n          return sortByTitle(a, b);\n        }\n\n        return a.fiscal_year > b.fiscal_year ? -1 : 1;\n      });\n    }\n\n    ngOnInit() {\n      this.sub = this.route.params.subscribe(params => {\n        this.id = params[\"id\"];\n\n        if (params[\"topic\"]) {\n          this.current_topic = params[\"topic\"].split('+');\n        }\n\n        if (params[\"year\"]) {\n          this.current_fy = params[\"year\"].split('+');\n        }\n\n        if (params[\"status\"]) {\n          this.current_status = params[\"status\"].split('+');\n        }\n      });\n\n      if (this.id.length != 24) {\n        this.sbId = this.csc_english_ids[this.id];\n      } else {\n        this.sbId = this.id;\n      }\n\n      this.title = this.csc_ids[this.sbId];\n      this.urlService.setPreviousTitle(this.title);\n      this.urlService.setCurrentTitle(this.title);\n      this.localJson.loadCscProjects(this.sbId).subscribe(data => {\n        this.cscProjectsList = data; // tslint:disable-next-line:forin\n\n        for (var project in this.cscProjectsList) {\n          for (var topic in this.cscProjectsList[project].topics) {\n            if (this.topics.indexOf(this.cscProjectsList[project].topics[topic]) < 0) {\n              this.topics.push(this.cscProjectsList[project].topics[topic]);\n            }\n          }\n\n          if (this.fiscal_years.indexOf(this.cscProjectsList[project].fiscal_year) < 0) {\n            this.fiscal_years.push(this.cscProjectsList[project].fiscal_year);\n          }\n\n          if (this.statuses.indexOf(this.cscProjectsList[project].status) < 0) {\n            this.statuses.push(this.cscProjectsList[project].status);\n          } // This is done so that \"All Fiscal Years\" is sorted at the top.\n\n\n          this.fiscal_years.sort().reverse();\n          this.topics.sort();\n          this.statuses.sort();\n          this.filteredCscProjectsList.push(this.cscProjectsList[project]);\n          this.dataLoading = false; // principal investigators\n\n          if (this.cscProjectsList[project].contacts.principal_investigators != null) {\n            this.cscProjectsList[project].investigators_formatted = \"\";\n\n            for (var pi of this.cscProjectsList[project].contacts.principal_investigators) {\n              this.cscProjectsList[project].investigators_formatted = this.cscProjectsList[project].investigators_formatted + pi.name + \"&nbsp;<i>(\" + pi.organization + \"</i>)<br>\";\n            }\n          } else {\n            this.cscProjectsList[project].investigators_formatted = \"N/A\";\n          } // topics\n\n\n          if (this.cscProjectsList[project].topics != null) {\n            this.cscProjectsList[project].topics_formatted = \"<ul>\";\n\n            for (var t of this.cscProjectsList[project].topics) {\n              this.cscProjectsList[project].topics_formatted += \"<li>\" + t + \"</li>\";\n            }\n\n            this.cscProjectsList[project].topics_formatted += \"</ul>\";\n          } else {\n            this.cscProjectsList[project].topics_formatted = \"N/A\";\n          } // status\n\n\n          if (!this.cscProjectsList[project].status) {\n            this.cscProjectsList[project].status = \"N/A\";\n          }\n        }\n\n        this.filterProjectsList();\n        this.sortList();\n      });\n    }\n\n  }\n\n  CscComponent.ɵfac = function CscComponent_Factory(t) {\n    return new (t || CscComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.LocalJsonService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i4.UrlService));\n  };\n\n  CscComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CscComponent,\n    selectors: [[\"app-csc\"]],\n    decls: 21,\n    vars: 6,\n    consts: [[1, \"container-fluid\"], [1, \"row\", \"csc\"], [1, \"col-md-2\"], [1, \"select-box\"], [1, \"select-title\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-md-10\", \"results-table\"], [\"class\", \"csc-projects\", 4, \"ngIf\"], [\"class\", \"d-lg-none col-xs-10\", 4, \"ngIf\"], [\"type\", \"checkbox\", \"name\", \"topic\", 3, \"checked\", \"value\", \"id\", \"change\"], [3, \"for\"], [\"type\", \"checkbox\", \"name\", \"fy\", 3, \"checked\", \"value\", \"id\", \"change\"], [\"type\", \"checkbox\", \"name\", \"status\", 3, \"checked\", \"value\", \"id\", \"change\"], [1, \"csc-projects\"], [1, \"d-none\", \"d-lg-block\"], [1, \"table\", \"table-striped\", 3, \"settings\", \"source\"], [4, \"ngIf\"], [\"class\", \"no_data\", 4, \"ngIf\"], [1, \"loading\"], [\"alt\", \"Loading Results\", \"title\", \"Loading Results\", 1, \"loading\", 3, \"src\"], [1, \"no_data\"], [1, \"btn\", \"btn-outline-secondary\", \"btn-small\", 3, \"click\"], [1, \"d-lg-none\", \"col-xs-10\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\"], [1, \"card-block\", \"mobile\"], [1, \"card-title\"], [3, \"routerLink\"], [1, \"card-text\"]],\n    template: function CscComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"app-breadcrumb\");\n        i0.ɵɵelementStart(2, \"h2\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 1)(5, \"div\", 2)(6, \"div\", 3)(7, \"h3\", 4);\n        i0.ɵɵtext(8, \"Topic\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, CscComponent_div_9_Template, 4, 5, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 3)(11, \"h3\", 4);\n        i0.ɵɵtext(12, \"Year\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, CscComponent_div_13_Template, 4, 5, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 3)(15, \"h3\", 4);\n        i0.ɵɵtext(16, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, CscComponent_div_17_Template, 4, 5, \"div\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 6);\n        i0.ɵɵtemplate(19, CscComponent_div_19_Template, 5, 4, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, CscComponent_div_20_Template, 2, 1, \"div\", 8);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", ctx.title, \" Projects\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.topics);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.fiscal_years);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.statuses);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.dataLoading && ctx.filteredCscProjectsList.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.dataLoading && ctx.filteredCscProjectsList.length > 0);\n      }\n    },\n    directives: [i5.BreadcrumbComponent, i3.NgForOf, i3.NgIf, i6.Ng2SmartTableComponent, i1.RouterLinkWithHref],\n    styles: [\"label[_ngcontent-%COMP%]{padding-left:.25rem}\", \"h2[_ngcontent-%COMP%]{margin:1.5rem .75rem 3rem}.select-box[_ngcontent-%COMP%]{margin-bottom:2rem}.select-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.35rem;padding-bottom:2px;border-bottom:1px solid #eee}.select-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0 0 .2rem;padding-left:1.1rem;text-indent:-1.1rem;line-height:1.4;font-size:1rem}.select-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:inline;position:relative;bottom:1px;margin-right:.5ex}.select-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline;margin-bottom:0}[_nghost-%COMP%]  table thead{border-bottom:1px solid #eee}[_nghost-%COMP%]  table thead a.sort.asc:after{border-width:6px!important;border-bottom-color:#888}[_nghost-%COMP%]  table thead a.sort.desc:after{border-width:6px!important;border-bottom-color:#888}[_nghost-%COMP%]  table tr th.ng2-smart-th{text-align:left;vertical-align:bottom!important;padding-top:0;margin-top:0}[_nghost-%COMP%]  table tr th.ng2-smart-th.title{text-align:center}[_nghost-%COMP%]  table tr th, [_nghost-%COMP%]  table tr td{line-height:1.25;font-size:1rem!important;border-top:none}[_nghost-%COMP%]  table tr th ul, [_nghost-%COMP%]  table tr td ul{margin-left:0;padding-left:0}.card[_ngcontent-%COMP%]{margin-bottom:1rem;padding:1rem}.card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:1rem}.card[_ngcontent-%COMP%]   h4.card-title[_ngcontent-%COMP%]{font-size:1.25rem}\"]\n  });\n  return CscComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}